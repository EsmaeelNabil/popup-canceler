{"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,GAAM;AAEN,EAAyC,AAAzC,uCAAyC;AACzC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,KAAK,EAAE,UAAU,EAAE,GAAG,GAAK,CAAC;IAC7D,EAAE,EAAE,UAAU,CAAC,MAAM,MAAK,OAAS,GAAE,CAAC;QACpC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,GAAE,0BAA4B,GAAE,UAAU,CAAC,GAAG;QAChE,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,WAAY,IAAG,EAAE,CAAC;YACrC,GAAG,CAAC,GAAG,GAAG,IAAG,CAAC,GAAG;YACjB,EAAqD,AAArD,mDAAqD;YAErD,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG;iBAAE,IAAM;gBAAI,MAAM,GAAK,CAAC;gBAC9C,EAA6B,AAA7B,2BAA6B;gBAC7B,EAAE,EAAE,MAAM,EACR,CAAC;oBAAD,EAAE,EAAE,MAAM,CAAC,IAAI,EACb,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,GAAK,CAAC;wBAC7B,OAAO,CAAC,GAAG,CAAC,IAAI,GAAE,EAAI;wBACtB,EAA6D,AAA7D,2DAA6D;wBAC7D,EAAE,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAI,GAAG,CAAC;4BACvB,OAAO,CAAC,GAAG,CAAC,GAAG;4BACf,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK;4BACxB,OAAO,CAAC,GAAG,EAAC,WAAa;wBAC3B,CAAC;oBACH,CAAC;gBACH,CAAC;YAEL,CAAC;QACH,CAAC;IACH,CAAC;AACH,CAAC,EAGD,CAA6B,AAA7B,EAA6B,AAA7B,2BAA6B;;;AC/B7B,KAAK,CAAC,gBAAgB,IAAG,GAAG,GAAI,GAAG,CAAC,OAAO,EAAE,OAAO,GAChD,GAAG,CAAC,YAAY,GAAI,WAAW,EAAE,OAAO,GACpC,OAAO,CAAC,GAAG,CAAE,OAAO,CAAC,MAAM,EAAE,CAAC,GAAI,CAAC,CAAC,IAAI,CAAC,CAAC,OAAM,CAAG;cAAE,GAAG,EAAE,CAAC,GACvD,CAAC,CAAC,WAAW,GACP,gBAAgB,CAAE,CAAC,IACnB,GAAG,CAAC,OAAO,EAAE,QAAO,GAAI,CAAC,CAAC,IAAI,CAAE,QAAO;;eAEhD,IAAI,EAAE,KAAK,MAAO,MAAM,IAAK,KAAK;cAClC,IAAI,CAAE,OAAO;;;;AAItB,KAAK,CAAC,4BAA4B,IAAG,GAAG,GAChC,gBAAgB,CAAE,GAAG,EAAE,IAAI,EAAE,KAAK,GAC9B,KAAK,CAAC,GAAG,EAAE,CAAC,GAAI,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,gBAAgB;UAAE,IAAI;;;AAE7D,KAAK,CAAC,YAAY,IAAI,GAAG,EAAE,aAAa,GAAK,CAAC;IAC1C,4BAA4B,CAAE,GAAG,EAAE,IAAI,EAAE,SAAS,GAAI,CAAC;QACnD,EAAE,GAAG,aAAa,IAAK,aAAa,KAAK,SAAS,EAC9C,UAAU,KAAQ,YAAY,CAAE,GAAG,EAAE,SAAS;UAAG,IAAI,CAAE,CAAiB,AAAjB,EAAiB,AAAjB,eAAiB;;aAExE,MAAM,CAAC,OAAO,CAAC,MAAM;IAE7B,CAAC;AACL,CAAC;AAED,MAAM,CAAC,UAAU,CAAC,OAAO,EAAE,IAAI,GAAI,CAAC;IAChC,EAAE,EAAE,IAAI,CAAC,WAAW,MAAK,WAAa,GAAE,CAAC;QACrC,MAAM,CAAC,OAAO,CAAC,wBAAwB,EAAE,GAAG,GAAI,YAAY,CAAE,GAAG;;QACjE,MAAM,CAAC,IAAI,CAAC,KAAK;YAAI,MAAM,EAAE,IAAI;YAAE,iBAAiB,EAAE,IAAI;YAAI,IAAI,GAAI,CAAC;YACnE,EAAE,EAAE,IAAI,CAAC,CAAC,GACN,MAAM,CAAC,IAAI,CAAC,MAAM,CAAE,IAAI,CAAC,CAAC,EAAE,EAAE;QAEtC,CAAC;IACL,CAAC;AACL,CAAC","sources":["src/background.js","node_modules/crx-hotreload/hot-reload.js"],"sourcesContent":["import \"crx-hotreload\";\n\n// this will run when a new tab is opened\nchrome.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {\n  if (changeInfo.status === \"loading\") {\n    console.log(tab.id, \"tab openned with status : \", changeInfo.url);\n    chrome.tabs.get(tabId, function (tab) {\n      var url = tab.url;\n      // check if url includes 'wp-content/themes/Shahid4u'\n\n      chrome.storage.local.get([\"urls\"], (result) => {\n        // push old urls to the array\n        if (result) {\n          if (result.urls) {\n            result.urls.forEach((item) => {\n              console.log(item, \"\\n\");\n              // check if url is already in the blocked array and remove it\n              if (url.includes(item)) {\n                console.log(url);\n                chrome.tabs.remove(tabId);\n                console.log(\"tab removed\");\n              }\n            });\n          }\n        }\n      });\n    });\n  }\n});\n\n\n// wp-content/themes/Shahid4u\n","const filesInDirectory = dir => new Promise (resolve =>\n    dir.createReader ().readEntries (entries =>\n        Promise.all (entries.filter (e => e.name[0] !== '.').map (e =>\n            e.isDirectory\n                ? filesInDirectory (e)\n                : new Promise (resolve => e.file (resolve))\n        ))\n        .then (files => [].concat (...files))\n        .then (resolve)\n    )\n)\n\nconst timestampForFilesInDirectory = dir =>\n        filesInDirectory (dir).then (files =>\n            files.map (f => f.name + f.lastModifiedDate).join ())\n\nconst watchChanges = (dir, lastTimestamp) => {\n    timestampForFilesInDirectory (dir).then (timestamp => {\n        if (!lastTimestamp || (lastTimestamp === timestamp)) {\n            setTimeout (() => watchChanges (dir, timestamp), 1000) // retry after 1s\n        } else {\n            chrome.runtime.reload ()\n        }\n    })\n}\n\nchrome.management.getSelf (self => {\n    if (self.installType === 'development') {\n        chrome.runtime.getPackageDirectoryEntry (dir => watchChanges (dir))\n        chrome.tabs.query ({ active: true, lastFocusedWindow: true }, tabs => { // NB: see https://github.com/xpl/crx-hotreload/issues/5\n            if (tabs[0]) {\n                chrome.tabs.reload (tabs[0].id)\n            }\n        })\n    }\n})\n"],"names":[],"version":3,"file":"background.js.map","sourceRoot":"../"}